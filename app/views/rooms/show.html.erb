<div class="row">
    <div class="col-12 mt-4">
        <%= image_tag @room.photos.first.image.url, style: 'width:100%;height:auto;' %>
    </div>
    
    <div class="col-8 content-1 mt-4">
        <div class="row">
            <div class="col-8">
                <h3> <%= @room.listing_name %></h3>
                <h6> <%= @room.address %> </h6>    
            </div>
            
            <div class="col-4 text-center">
                <% if @room.user.image? %>
                    <%= image_tag "http://graph.facebook.com/#{@room.user.uid}/picture?type=large", class: "avatar-room-scale" %>
                <% else %>
                    <%= image_tag gravatar_for(@room.user), class: "avatar-room-scale" %>
                <% end %>
                <div class="user-name mt-2">
                    <h6><%= @room.user.fullname%></h6>
                </div>
            </div>
        </div>
        <hr>

        <div class="row text-center">            
            <div class="col-3">
                <i class="fa fa-home fa-2x"></i> <br>
                <%= @room.home_type %>
            </div>
            <div class="col-3">
             <i class="fa fa-user fa-2x"></i><br>
                <%= "#{@room.accommodate} Guests" %>
            </div>
            <div class="col-3">
             <i class="fa fa-bed fa-2x"></i> <br>
                <%= "#{@room.bedrooms} Bedrooms" %>
            </div>
            <div class="col-3">
            <i class="fa fa-bath fa-2x"></i> <br>
                <%= "#{@room.bathrooms} Bathrooms" %>
            </div>
        </div>
        <hr>

        <div class="row">
            <div class="col-6">
                <h4>About this listing</h4>
                <p clas="text-justify"><%= @room.summary %> </p>
            </div>
        </div>
        <hr>

        <div class="row">
            <div class="col-4">
                <h4> Amenities</h4>
            </div>
            <div class="col-4">
                <% unless @room.is_tv %>
                    <div class = "line-throught", style = "text-decoration: line-through;" > TV </div>
                <% else %>
                    <div class = "line-throught", style = "text-decoration: none;" > TV </div>
                <% end %>

                <% unless @room.is_kitchen %>
                    <div class = "line-throught", style = "text-decoration: line-through;" > Kitchen </div>
                <% else %>
                    <div class = "line-throught", style = "text-decoration: none;" > Kitchen </div>
                <% end %>

                <% unless @room.is_internet %>
                    <div class = "line-throught", style = "text-decoration: line-through;" > Internet </div>
                <% else %>
                    <div class = "line-throught", style = "text-decoration: none;" > Internet </div>
                <% end %>
            </div>

            <div class="col-4">
                <% unless @room.is_heating %>
                    <div class = "line-throught", style = "text-decoration: line-through;" > Heating </div>
                <% else %>
                    <div class = "line-throught", style = "text-decoration: none;" > Heating </div>
                <% end %>

                <% unless @room.is_air %>
                    <div class = "line-throught", style = "text-decoration: line-through;" > Air conditioning </div>
                <% else %>
                    <div class = "line-throught", style = "text-decoration: none;" > Air conditioning </div>
                <% end %>
            </div>
        </div>

        <div class="row mt-4">            
            <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">

                <ol class="carousel-indicators">
                <% @photos.each_with_index do |photo, n| %>
                    <li data-target='#MyCarousel' data-slide-to="#{n}" class="#{'active' if n == 0}"></li>
                <% end %>
                </ol>

                <div class="carousel-inner">
                    <% @photos.each.with_index do |photo, index| %>
                        <div class="carousel-item <%= index == 0 ? 'active' : '' %>">
                            <%= image_tag photo.image.url(), class: "carousel-img-size" %>
                        </div>
                    <% end %>
                </div> 
                 

                <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>
        <hr>

         <div class="row">
            <div class="col-md-12">
                <h3> 0 Reviews <span id="average_rating"></span></h3>
                <div class="container">
                     <div class="text-center">
                         <h4>There are no reviews.</h4>
                    </div>
                </div>
            </div>
        </div>
        <hr>

        <div class="row">            
            <div class="col-12">
            <div id="map"></div>  
            </div>
        </div>
        <hr>
    </div>  

    <div class="sidebar col-4 mt-4">
        <div class="card">
            <div class="card-header text-white">
                <span><%= "$#{@room.price}" %></span>
                <span class="pull-right">Per Night</span>
            </div>
            <div class="card-body">
            </div>
        </div>
    </div>
</div>


<script>
function initMap() {
    var myCoords = new google.maps.LatLng(<%= @room.latitude %>, <%= @room.longitude %>);
    var mapOptions = {
    center: myCoords,
    zoom: 14
    };
    var map = new google.maps.Map(document.getElementById('map'), mapOptions);
    var marker = new google.maps.Marker({
        position: myCoords,
        map: map
    });

    var infoWindow = new google.maps.InfoWindow({
        content: '<div id="content"><%= image_tag @room.photos.first.image.url(:medium) %></div>'
    });

    infoWindow.open(map, marker);
    }
    google.maps.event.addDomListener(window, 'load', initMap);
</script>